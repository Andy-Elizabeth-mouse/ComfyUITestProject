# ComfyUI Integration Plugin - 用户指南

## 快速开始

### 1. 安装插件

1. 将 `ComfyUIIntegration` 文件夹复制到您的UE5项目的 `Plugins` 目录中
2. 右键点击项目的 `.uproject` 文件，选择 "Generate Visual Studio project files"
3. 在Visual Studio中打开项目并构建
4. 启动UE5编辑器，在 `Edit > Plugins` 中启用 "ComfyUI Integration"

### 2. 配置ComfyUI服务器

1. 安装并运行ComfyUI服务器
2. 确保服务器运行在默认端口 `8188`
3. 在插件设置中配置服务器URL（默认：`http://127.0.0.1:8188`）

### 3. 使用插件

1. 在UE5编辑器中，通过 `Window > ComfyUI Integration` 打开插件界面
2. 在服务器配置区域输入ComfyUI服务器URL
3. 选择所需的工作流类型
4. 输入提示词和负面提示词
5. 点击"Generate"开始生成
6. 生成完成后，使用"Save"、"Save As"或"Preview"功能

## 工作流类型

### 📝 文生图 (Text-to-Image)
- **描述**: 根据文本描述生成图像
- **用途**: 概念艺术、纹理创建、参考图像生成
- **输入**: 正向提示词、负向提示词
- **输出**: 2D图像纹理

### 🖼️ 图生图 (Image-to-Image)  
- **描述**: 基于输入图像和提示词生成新图像
- **用途**: 图像风格转换、细节增强、变体生成
- **输入**: 输入图像、正向提示词、负向提示词
- **输出**: 修改后的2D图像

### 🎯 文生3D (Text-to-3D)
- **描述**: 从文本描述生成3D模型
- **用途**: 快速原型制作、3D资产创建
- **输入**: 详细的3D对象描述
- **输出**: 3D模型文件

### 🎨 图生3D (Image-to-3D)
- **描述**: 从2D图像重建3D模型
- **用途**: 照片测量、3D重建
- **输入**: 2D参考图像
- **输出**: 3D模型文件

### 🎭 纹理生成 (Texture Generation)
- **描述**: 为3D模型生成材质和纹理
- **用途**: 材质创建、表面细节增强
- **输入**: 材质描述、3D模型引用
- **输出**: 纹理贴图文件

## 界面说明

### 服务器配置区域
- **Server URL**: ComfyUI服务器地址（默认：`http://127.0.0.1:8188`）
- 支持本地和远程服务器连接

### 工作流选择区域
- **Workflow Type**: 下拉菜单选择所需的工作流类型
- 不同类型支持不同的参数配置

### 提示词输入区域
- **Positive Prompt**: 正向提示词，描述您想要生成的内容
- **Negative Prompt**: 负向提示词，描述您不想要的内容

### 控制按钮区域
- **Generate**: 开始生成内容
- **Save**: 保存生成的内容到项目资产
- **Save As**: 另存为新的资产文件
- **Preview**: 在单独窗口中预览生成的内容

### 图像预览区域
- 显示生成的图像结果
- 支持缩放和滚动查看
- 双击可全屏预览

## 高级技巧

### 提示词编写技巧

1. **具体描述**
   ```
   Good: "medieval castle on a hill at sunset, detailed architecture, warm lighting"
   Bad: "castle"
   ```

2. **使用修饰词**
   ```
   "photorealistic, highly detailed, 8k resolution, professional lighting"
   ```

3. **风格指定**
   ```
   "in the style of concept art, digital painting, matte painting"
   ```

4. **负面提示词**
   ```
   "blurry, low quality, distorted, artifacts, bad anatomy"
   ```

### 参数优化

1. **质量设置**
   - 测试时使用较低步数（10-15步）
   - 最终输出使用较高步数（20-50步）

2. **分辨率选择**
   - 预览：512x512
   - 生产：1024x1024或更高

3. **批量生成**
   - 使用不同的seed值生成多个变体
   - 选择最佳结果进行进一步处理

### 工作流自定义

1. **创建自定义工作流**
   - 在ComfyUI中设计工作流
   - 导出JSON配置
   - 集成到插件中

2. **参数调整**
   - 修改采样器设置
   - 调整CFG比例
   - 优化生成质量

## 故障排除

### 常见问题

1. **连接失败**
   - 检查ComfyUI服务器是否运行
   - 验证URL和端口设置
   - 检查防火墙配置

2. **生成失败**
   - 检查提示词是否合理
   - 验证模型文件是否正确加载
   - 查看ComfyUI服务器日志

3. **生成速度慢**
   - 减少采样步数
   - 降低生成分辨率
   - 检查硬件资源使用

4. **质量问题**
   - 调整CFG比例
   - 使用更好的采样器
   - 优化提示词描述

### 性能优化

1. **硬件要求**
   - 推荐：NVIDIA RTX 3060或更高
   - 最低：8GB显存
   - 建议：16GB系统内存

2. **服务器优化**
   - 使用SSD存储模型文件
   - 配置适当的批处理大小
   - 监控GPU使用率

3. **网络优化**
   - 使用本地服务器减少延迟
   - 配置适当的超时设置
   - 监控网络带宽使用

## 最佳实践

1. **项目组织**
   - 创建专门的文件夹管理生成的资产
   - 使用描述性的文件名
   - 保存生成参数用于后续调整

2. **版本控制**
   - 定期备份重要的生成结果
   - 记录成功的提示词组合
   - 保存工作流配置文件

3. **团队协作**
   - 共享成功的工作流配置
   - 建立提示词库
   - 制定资产命名规范

## 技术支持

如果您遇到问题或需要帮助：

1. 检查本用户指南中的故障排除部分
2. 查看项目的README.md文件
3. 参考开发指南了解技术细节
4. 在GitHub上提交Issues

## 更新日志

### v1.0.0 (当前版本)
- 初始版本发布
- 支持基础的文生图和图生图工作流
- 提供自定义UI界面
- 基本的保存和预览功能

### 即将发布的功能
- 3D模型生成支持
- 批量处理功能
- 自定义工作流编辑器
- 更多预设工作流模板

感谢使用ComfyUI Integration插件！
