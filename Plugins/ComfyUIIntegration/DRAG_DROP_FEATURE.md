# 图像拖拽功能使用说明

## 新功能概述

ComfyUI插件现在支持直接从UE编辑器的内容浏览器拖拽纹理资产到图像输入框中，这使得在图生图、图生3D等工作流模式中使用现有项目资产变得更加便捷。

## 支持的功能

### 1. 拖拽操作
- **支持的资产类型**: UTexture2D（纹理2D资产）
- **拖拽来源**: 内容浏览器中的纹理资产
- **目标区域**: 图像输入框（在图生图、图生3D等工作流模式中可见）

### 2. 视觉反馈
- **拖拽悬停**: 当有效纹理资产悬停在输入框上时，边框会变为蓝色高亮
- **实时预览**: 拖拽完成后，图像会立即显示在输入框中
- **状态提示**: 提供清晰的提示文本指导用户操作

### 3. 功能集成
- **兼容原有功能**: 保留了原有的"加载图像"和"清除图像"按钮
- **状态同步**: 拖拽和按钮操作都会正确同步界面状态
- **通知系统**: 操作完成后会显示成功通知

## 使用方法

### 步骤1: 选择工作流模式
1. 在ComfyUI插件界面中选择支持图像输入的工作流：
   - 图生图 (Image to Image)
   - 图生3D (Image to 3D)
   - 纹理生成 (Texture Generation)

### 步骤2: 拖拽纹理资产
1. 在内容浏览器中找到你想使用的纹理资产
2. 点击并拖拽该纹理资产到"输入图像"区域
3. 当鼠标悬停在输入框上时，你会看到蓝色边框高亮
4. 释放鼠标完成拖拽操作

### 步骤3: 确认和使用
1. 拖拽完成后，图像会立即显示在输入框中
2. "清除图像"按钮将变为可用状态
3. 现在你可以继续配置其他参数并开始生成

## 技术实现

### 核心组件
- **SImageDragDropWidget**: 新的自定义Slate Widget，处理拖拽逻辑
- **拖拽验证**: 检查拖拽的资产类型是否为有效的纹理资产
- **资产提取**: 从拖拽操作中安全提取UTexture2D对象

### 关键特性
- **类型安全**: 只接受UTexture2D及其子类型
- **内存管理**: 正确处理Slate画刷的生命周期
- **错误处理**: 提供友好的错误提示和验证

## 注意事项

1. **支持的资产类型**: 目前只支持UTexture2D类型的纹理资产
2. **文件格式**: 确保纹理资产已正确导入到UE项目中
3. **性能考虑**: 大型纹理可能需要更多时间加载和显示
4. **工作流兼容性**: 某些自定义工作流可能需要特定的图像格式或尺寸

## 故障排除

### 拖拽无响应
- 确保拖拽的是纹理资产（.uasset文件）
- 检查当前工作流模式是否支持图像输入
- 确保纹理资产已正确加载到内存中

### 图像显示异常
- 检查纹理资产的压缩设置
- 确认纹理尺寸不会过大导致内存问题
- 尝试重新导入纹理资产

## 后续改进计划

1. **扩展资产支持**: 支持更多类型的图像资产
2. **批量操作**: 支持一次拖拽多个图像
3. **预览优化**: 提供更好的图像预览和缩放功能
4. **格式转换**: 自动处理不兼容的图像格式

---

*此功能已在UE 5.5环境下测试验证*
